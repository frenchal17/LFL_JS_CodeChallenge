<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
	  "http://www.w3.org/TR/html4/strict.dtd">
<html dir="ltr" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <title>LFL JavaScript Project</title>
    <style>
      html, body {
      height: 100%;
      text-align: center;
      }
      .container {
      margin: 0 auto;
      width: 100%;
      align-items: center;
      background-color: #CCC;
      }
      .input-panel {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 15px;
      padding: 5px;
      }
      #map {
      width: 900px;
      height: 550px;
      padding: 5px;
      margin: 0 auto;
      }
    </style>

     <!-- <script src="https://maps.googleapis.com/maps/api/js?callback=initMap"
	  async defer></script> -->
  </head>
  
  <body>
    <h1 style="color:turquoise;width:100%;
	       text-align:center;">Ordering Location Via Google Geocode API</h1>
    <div class="input-panel">
      <input id="address" type="textbox" value="510 Victoria, Venice, CA">
      <input id="submit" type="button" value="Geocode">
    </div>
    
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js">
</script>


    <div id="map"></div>
    <script type="text/javascript">
      var locations = [
      "Times Square, Manhattan, NY 10036",
      "13000 S Dakota 244, Keystone, SD 57751",
      "1600 Pennsylvania Ave NW, Washington, DC 20500",
      "Golden Gate Bridge, San Fransisco, CA 94129",
      "Stonehenge, A344, Amesbury, Wiltshire SP47DE, United Kingdom",
      "Great Wall of China",
      "Hollywood Sign, Los Angeles, CA"
      ];

      var locDictionary;
      var infoWindow;
      
      window.onload = function initMap() {
      var mapDiv = document.getElementById('map');
      var map = new google.maps.Map(mapDiv, {
      center: {lat: 28.00, lng: 2.000},
      zoom: 2
      });
      var marker;
      var geocoder = new google.maps.Geocoder();
      infoWindow = new google.maps.InfoWindow({
      content: "placeholder"
      });
      
      for (var i in locations) {
      geocoder.geocode({'address': locations[i]}, function(results, status) {
      
      marker = new google.maps.Marker({
      map: map,
      position: results[0].geometry.location,
      title: locations[i],
      animation: google.maps.Animation.DROP,
      address: locations[i]
      })
      })
      }
      
      document.getElementById('submit').addEventListener('click', function(){
      geocodeAddress(geocoder, map);
      });
      }

      function geocodeAddress(geocoder, resultsMap) {

      var address = document.getElementById('address').value;
      geocoder.geocode({'address': address}, function(results, status) {
      if (status === google.maps.GeocoderStatus.OK) {
      if (!locations[7]){
      marker = new google.maps.Marker({
      map: resultsMap,
      position: results[0].geometry.location,
      animation: google.maps.Animation.DROP
      });
      locations[7] = marker;
      } else {
      locations[7].setPosition(results[0].geometry.location);
      }
      var html = "<div><h3>" + address + "</h3>";
	infoWindow.setContent(html);
	var newMark = locations[7];
	infoWindow.open(resultsMap, locations[7]);
	
	} else {
	alert('Geocode was not successful for the following reason: ' + status);
	}
	});
	
	}

    </script>
    
  </body>
</html>
